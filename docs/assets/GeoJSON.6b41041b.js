import{F as e}from"./Vector.c3321bd0.js";import{z as t,y as r,E as o,bc as n,bN as i,r as s,a9 as a,v as u,bO as c,I as p,_ as y,ay as f,ak as h,al as l,q as m}from"./TileProperty.6da85ab0.js";import{J as g}from"./JSONFeature.af6a5d11.js";import{M as d,b as _,a as v,L as G,t as O}from"./Feature.635c9857.js";var b,E=(b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function P(e){for(var t=[],r=0,o=e.length;r<o;++r)t.push(e[r].clone());return t}var T=function(e){function c(t){var r=e.call(this)||this;return r.geometries_=t||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return E(c,e),c.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(t),this.changeEventsKeys_.length=0},c.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(r(this.geometries_[e],o.CHANGE,this.changed,this))},c.prototype.clone=function(){var e=new c(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},c.prototype.closestPointXY=function(e,t,r,o){if(o<n(this.getExtent(),e,t))return o;for(var i=this.geometries_,s=0,a=i.length;s<a;++s)o=i[s].closestPointXY(e,t,r,o);return o},c.prototype.containsXY=function(e,t){for(var r=this.geometries_,o=0,n=r.length;o<n;++o)if(r[o].containsXY(e,t))return!0;return!1},c.prototype.computeExtent=function(e){i(e);for(var t=this.geometries_,r=0,o=t.length;r<o;++r)s(e,t[r].getExtent());return e},c.prototype.getGeometries=function(){return P(this.geometries_)},c.prototype.getGeometriesArray=function(){return this.geometries_},c.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,r=0,o=t.length;r<o;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e},c.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,o=!1,n=0,i=r.length;n<i;++n){var s=r[n],a=s.getSimplifiedGeometry(e);t.push(a),a!==s&&(o=!0)}if(o){var u=new c(null);return u.setGeometriesArray(t),u}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},c.prototype.getType=function(){return a.GEOMETRY_COLLECTION},c.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,o=t.length;r<o;++r)if(t[r].intersectsExtent(e))return!0;return!1},c.prototype.isEmpty=function(){return 0===this.geometries_.length},c.prototype.rotate=function(e,t){for(var r=this.geometries_,o=0,n=r.length;o<n;++o)r[o].rotate(e,t);this.changed()},c.prototype.scale=function(e,t,r){var o=r;o||(o=u(this.getExtent()));for(var n=this.geometries_,i=0,s=n.length;i<s;++i)n[i].scale(e,t,o);this.changed()},c.prototype.setGeometries=function(e){this.setGeometriesArray(P(e))},c.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},c.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,o=t.length;r<o;++r)t[r].applyTransform(e);this.changed()},c.prototype.translate=function(e,t){for(var r=this.geometries_,o=0,n=r.length;o<n;++o)r[o].translate(e,t);this.changed()},c.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},c}(c),N=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();function j(e,t){if(!e)return null;var r;switch(e.type){case a.POINT:r=function(e){return new l(e.coordinates)}(e);break;case a.LINE_STRING:r=function(e){return new G(e.coordinates)}(e);break;case a.POLYGON:r=function(e){return new h(e.coordinates)}(e);break;case a.MULTI_POINT:r=function(e){return new v(e.coordinates)}(e);break;case a.MULTI_LINE_STRING:r=function(e){return new _(e.coordinates)}(e);break;case a.MULTI_POLYGON:r=function(e){return new d(e.coordinates)}(e);break;case a.GEOMETRY_COLLECTION:r=function(e,t){var r=e.geometries.map((function(e){return j(e,t)}));return new T(r)}(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return O(r,!1,t)}function w(e,t){var r,o=(e=O(e,!0,t)).getType();switch(o){case a.POINT:r=function(e,t){return{type:"Point",coordinates:e.getCoordinates()}}(e);break;case a.LINE_STRING:r=function(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case a.POLYGON:r=function(e,t){var r;t&&(r=t.rightHanded);return{type:"Polygon",coordinates:e.getCoordinates(r)}}(e,t);break;case a.MULTI_POINT:r=function(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case a.MULTI_LINE_STRING:r=function(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case a.MULTI_POLYGON:r=function(e,t){var r;t&&(r=t.rightHanded);return{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}(e,t);break;case a.GEOMETRY_COLLECTION:r=function(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map((function(e){var r=m({},t);return delete r.featureProjection,w(e,r)}))}}(e,t);break;case a.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return r}var C=function(t){function r(e){var r=this,o=e||{};return(r=t.call(this)||this).dataProjection=p(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(r.defaultFeatureProjection=p(o.featureProjection)),r.geometryName_=o.geometryName,r.extractGeometryName_=o.extractGeometryName,r.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],r}return N(r,t),r.prototype.readFeatureFromObject=function(t,r){var o=null,n=j((o="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,r),i=new e;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&i.setGeometryName(o.geometry_name),i.setGeometry(n),"id"in o&&i.setId(o.id),o.properties&&i.setProperties(o.properties,!0),i},r.prototype.readFeaturesFromObject=function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,i=o.length;n<i;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r},r.prototype.readGeometryFromObject=function(e,t){return j(e,t)},r.prototype.readProjectionFromObject=function(e){var t,r=e.crs;return r?"name"==r.type?t=p(r.properties.name):"EPSG"===r.type?t=p("EPSG:"+r.properties.code):y(!1,36):t=this.dataProjection,t},r.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;var n=e.getProperties(),i=e.getGeometry();return i&&(r.geometry=w(i,t),delete n[e.getGeometryName()]),f(n)||(r.properties=n),r},r.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}},r.prototype.writeGeometryObject=function(e,t){return w(e,this.adaptOptions(t))},r}(g);export{C as G};
