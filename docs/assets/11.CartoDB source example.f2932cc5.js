import{q as t,bG as e,M as o,V as a}from"./TileProperty.6da85ab0.js";import{O as i}from"./OSM.2ead155c.js";import{T as n}from"./Tile.28bcaf1f.js";import{X as s}from"./XYZ.473ba1b0.js";import{i as r,j as p,A as c,c as l,d as u,u as m,F as f,b as h,o as _}from"./vendor.a926ca27.js";import{N as d}from"./Select.6b465d60.js";import"./BaseTile.190efee2.js";import"./TileLayer.24fccdef.js";import"./light.f92f6943.js";import"./fade-in-scale-up.cssr.85d45d5e.js";import"./use-rtl.2c9540d8.js";var v,y=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),g=function(o){function a(t){var e=o.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection})||this;return e.account_=t.account,e.mapId_=t.map||"",e.config_=t.config||{},e.templateCache_={},e.initializeMap_(),e}return y(a,o),a.prototype.getConfig=function(){return this.config_},a.prototype.updateConfig=function(e){t(this.config_,e),this.initializeMap_()},a.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},a.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var o=new XMLHttpRequest;o.addEventListener("load",this.handleInitResponse_.bind(this,t)),o.addEventListener("error",this.handleInitError_.bind(this)),o.open("POST",e),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(this.config_))}},a.prototype.handleInitResponse_=function(t,o){var a=o.target;if(!a.status||a.status>=200&&a.status<300){var i=void 0;try{i=JSON.parse(a.responseText)}catch(n){return void this.setState(e.ERROR)}this.applyTemplate_(i),this.templateCache_[t]=i,this.setState(e.READY)}else this.setState(e.ERROR)},a.prototype.handleInitError_=function(t){this.setState(e.ERROR)},a.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},a}(s);const b=h("div",{id:"map",class:"map"},null,-1),j={setup(t){const e=r(0),s=[{label:"0 km^3",value:0},{label:"5000 km^3",value:5e3},{label:"10000 km^3",value:1e4},{label:"50000 km^3",value:5e4},{label:"100000 km^3",value:1e5},{label:"500000 km^3",value:5e5},{label:"1000000 km^3",value:1e6}],h={layers:[{type:"cartodb",options:{cartocss_version:"2.1.1",cartocss:"#layer { polygon-fill: #F00; }",sql:"select * from european_countries_e where area > 0"}}]},v=new g({account:"documentation",config:h}),y=new o({layers:[new n({source:new i({})}),new n({source:v})],view:new a({center:[0,0],zoom:2})});return p((()=>{y.setTarget("map")})),c(e,(t=>{var e;e=t,h.layers[0].options.sql="select * from european_countries_e where area > "+e,v.setConfig(h)})),(t,o)=>(_(),l(f,null,[b,u(m(d),{value:e.value,"onUpdate:value":o[0]||(o[0]=t=>e.value=t),options:s},null,8,["value"])],64))}};export{j as default};
