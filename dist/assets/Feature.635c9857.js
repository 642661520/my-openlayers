import{bb as t,a_ as e,ae as i,bc as o,bd as n,be as r,bf as s,aj as a,aM as l,bg as h,a9 as d,bh as u,bi as f,bj as p,bk as c,bl as y,aL as g,bm as C,bn as v,bo as _,bp as P,al as b,bq as w,ab as F,k as m,br as x,bs as O,bt as R,bu as j,bv as M,aK as E,ad as I,bw as L,bx as A,ak as T,by as D,bz as S,I as X,ah as Y,q as G,az as N,C as q}from"./TileProperty.6da85ab0.js";import{e as U}from"./featureloader.82820175.js";function k(i,o,n,r,s,a,l){var h,d,u=(n-o)/r;if(1===u)h=o;else if(2===u)h=o,d=s;else if(0!==u){for(var f=i[o],p=i[o+1],c=0,y=[0],g=o+r;g<n;g+=r){var C=i[g],v=i[g+1];c+=Math.sqrt((C-f)*(C-f)+(v-p)*(v-p)),y.push(c),f=C,p=v}var _=s*c,P=t(y,_);P<0?(d=(_-y[-P-2])/(y[-P-1]-y[-P-2]),h=o+(-P-2)*r):h=o+P*r}var b=l>1?l:2,w=a||new Array(b);for(g=0;g<b;++g)w[g]=void 0===h?NaN:void 0===d?i[h+g]:e(i[h+g],i[h+r+g],d);return w}function z(t,i,o,n,r,s){if(o==i)return null;var a;if(r<t[i+n-1])return s?((a=t.slice(i,i+n))[n-1]=r,a):null;if(t[o-1]<r)return s?((a=t.slice(o-n,o))[n-1]=r,a):null;if(r==t[i+n-1])return t.slice(i,i+n);for(var l=i/n,h=o/n;l<h;){var d=l+h>>1;r<t[(d+1)*n-1]?h=d:l=d+1}var u=t[l*n-1];if(r==u)return t.slice((l-1)*n,(l-1)*n+n);var f=(r-u)/(t[(l+1)*n-1]-u);a=[];for(var p=0;p<n-1;++p)a.push(e(t[(l-1)*n+p],t[l*n+p],f));return a.push(r),a}var Z,K=(Z=function(t,e){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Z(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),W=function(t){function e(e,i){var o=t.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?o.setCoordinates(e,i):o.setFlatCoordinates(i,e),o}return K(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?i(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,s){return s<o(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))},e.prototype.forEachSegment=function(t){return s(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=a.XYM&&this.layout!=a.XYZM)return null;var i=void 0!==e&&e;return z(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return l(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return k(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return U(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,a.XY)},e.prototype.getType=function(){return d.LINE_STRING},e.prototype.intersectsExtent=function(t){return u(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=f(this.flatCoordinates,0,t,this.stride),this.changed()},e}(p),B=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),H=function(t){function e(e,o,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,o);else if(void 0!==o&&n)r.setFlatCoordinates(o,e),r.ends_=n;else{for(var s=r.getLayout(),a=e,l=[],h=[],d=0,u=a.length;d<u;++d){var f=a[d];0===d&&(s=f.getLayout()),i(l,f.getFlatCoordinates()),h.push(l.length)}r.setFlatCoordinates(s,l),r.ends_=h}return r}return B(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?i(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<o(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(c(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),y(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=a.XYM&&this.layout!=a.XYZM||0===this.flatCoordinates.length)return null;var o=void 0!==e&&e,n=void 0!==i&&i;return function(t,e,i,o,n,r,s){if(s)return z(t,e,i[i.length-1],o,n,r);var a;if(n<t[o-1])return r?((a=t.slice(0,o))[o-1]=n,a):null;if(t[t.length-1]<n)return r?((a=t.slice(t.length-o))[o-1]=n,a):null;for(var l=0,h=i.length;l<h;++l){var d=i[l];if(e!=d){if(n<t[e+o-1])return null;if(n<=t[d-1])return z(t,e,d,o,n,!1);e=d}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,o,n)},e.prototype.getCoordinates=function(){return g(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new W(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,o=[],n=0,r=0,s=e.length;r<s;++r){var a=e[r],l=new W(t.slice(n,a),i);o.push(l),n=a}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,o=0,n=this.ends_,r=this.stride,s=0,a=n.length;s<a;++s){var l=n[s],h=k(e,o,l,r,.5);i(t,h),o=l}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],o=[];return i.length=C(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,o),new e(i,a.XY,o)},e.prototype.getType=function(){return d.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return v(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(p),J=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Q=function(t){function e(e,i){var o=t.call(this)||this;return i&&!Array.isArray(e[0])?o.setFlatCoordinates(i,e):o.setCoordinates(e,i),o}return J(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?i(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<o(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,s=this.stride,a=0,l=r.length;a<l;a+=s){var h=P(t,e,r[a],r[a+1]);if(h<n){n=h;for(var d=0;d<s;++d)i[d]=r[a+d];i.length=s}}return n},e.prototype.getCoordinates=function(){return l(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new b(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,o=[],n=0,r=t.length;n<r;n+=i){var s=new b(t.slice(n,n+i),e);o.push(s)}return o},e.prototype.getType=function(){return d.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,o=0,n=e.length;o<n;o+=i){var r=e[o],s=e[o+1];if(w(t,r,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=f(this.flatCoordinates,0,t,this.stride),this.changed()},e}(p);function V(t,e,i,o){for(var n=[],r=m(),s=0,a=i.length;s<a;++s){var l=i[s];r=F(t,e,l[0],o),n.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return n}var $=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tt=function(t){function e(e,o,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var s=r.getLayout(),a=e,l=[],h=[],d=0,u=a.length;d<u;++d){var f=a[d];0===d&&(s=f.getLayout());for(var p=l.length,c=f.getEnds(),y=0,g=c.length;y<g;++y)c[y]+=p;i(l,f.getFlatCoordinates()),h.push(c)}o=s,e=l,n=h}return void 0!==o&&n?(r.setFlatCoordinates(o,e),r.endss_=n):r.setCoordinates(e,o),r}return $(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var o=this.flatCoordinates.length;i(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=o}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),o=0;o<t;++o)i[o]=this.endss_[o].slice();var n=new e(this.flatCoordinates.slice(),this.layout,i);return n.applyProperties(this),n},e.prototype.closestPointXY=function(t,e,i,n){return n<o(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(x(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),O(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return R(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return j(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),M(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,E(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=V(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=I(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Q(this.getFlatInteriorPoints().slice(),a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;L(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=M(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],o=[];return i.length=A(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,o),new e(i,a.XY,o)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var o=this.endss_[t].slice(),n=o[o.length-1];if(0!==e)for(var r=0,s=o.length;r<s;++r)o[r]-=e;return new T(this.flatCoordinates.slice(e,n),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,o=[],n=0,r=0,s=i.length;r<s;++r){var a=i[r].slice(),l=a[a.length-1];if(0!==n)for(var h=0,d=a.length;h<d;++h)a[h]-=n;var u=new T(e.slice(n,l),t,a);o.push(u),n=l}return o},e.prototype.getType=function(){return d.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return D(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=S(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=0===o.length?0:o[o.length-1]}this.changed()},e}(p),et=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var o=e.dataProjection?X(e.dataProjection):this.readProjection(t);e.extent&&o&&o.getUnits()===Y.TILE_PIXELS&&(o=X(o)).setWorldExtent(e.extent),i={dataProjection:o,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return G({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return N()},t.prototype.readFeature=function(t,e){return N()},t.prototype.readFeatures=function(t,e){return N()},t.prototype.readGeometry=function(t,e){return N()},t.prototype.readProjection=function(t){return N()},t.prototype.writeFeature=function(t,e){return N()},t.prototype.writeFeatures=function(t,e){return N()},t.prototype.writeGeometry=function(t,e){return N()},t}();function it(t,e,i){var o,n=i?X(i.featureProjection):null,r=i?X(i.dataProjection):null;if(o=n&&r&&!q(n,r)?(e?t.clone():t).transform(e?n:r,e?r:n):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);o===t&&(o=t.clone()),o.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return o}export{et as F,W as L,tt as M,Q as a,H as b,k as i,V as l,it as t};
