import{ce as t,cf as e,cg as i,E as n,ch as r,ci as o,y as s,z as a,B as l,cj as h,M as d,bS as g,V as p}from"./TileProperty.6da85ab0.js";import{O as u}from"./OSM.2ead155c.js";import{T as c}from"./Tile.28bcaf1f.js";import{j as _,c as m,o as f,F as v,b as y}from"./vendor.a926ca27.js";import"./XYZ.473ba1b0.js";import"./BaseTile.190efee2.js";import"./TileLayer.24fccdef.js";var b,E=(b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),w=0,L=1,R=function(h){function d(o){var s=this,a=o||{};(s=h.call(this,{element:document.createElement("div"),render:a.render})||this).dragListenerKeys_=[],s.currentResolution_=void 0,s.direction_=w,s.dragging_,s.heightLimit_=0,s.widthLimit_=0,s.startX_,s.startY_,s.thumbSize_=null,s.sliderInitialized_=!1,s.duration_=void 0!==a.duration?a.duration:200;var l=void 0!==a.className?a.className:"ol-zoomslider",d=document.createElement("button");d.setAttribute("type","button"),d.className=l+"-thumb "+t;var g=s.element;return g.className=l+" "+t+" "+e,g.appendChild(d),g.addEventListener(i.POINTERDOWN,s.handleDraggerStart_.bind(s),!1),g.addEventListener(i.POINTERMOVE,s.handleDraggerDrag_.bind(s),!1),g.addEventListener(i.POINTERUP,s.handleDraggerEnd_.bind(s),!1),g.addEventListener(n.CLICK,s.handleContainerClick_.bind(s),!1),d.addEventListener(n.CLICK,r,!1),s}return E(d,h),d.prototype.setMap=function(t){h.prototype.setMap.call(this,t),t&&t.render()},d.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;var n=getComputedStyle(t);e-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),i-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);var r=t.firstElementChild,o=getComputedStyle(r),s=r.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),a=r.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[s,a],e>i?(this.direction_=L,this.widthLimit_=e-s):(this.direction_=w,this.heightLimit_=i-a),this.sliderInitialized_=!0},d.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i),r=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:r,duration:this.duration_,easing:o})},d.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var n=this.handleDraggerDrag_,r=this.handleDraggerEnd_,o=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(s(o,i.POINTERMOVE,n,this),s(o,i.POINTERUP,r,this))}}},d.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,n=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},d.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(a),this.dragListenerKeys_.length=0)},d.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==L?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},d.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===L?t/this.widthLimit_:e/this.heightLimit_,l(i,0,1)},d.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},d.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return l(1-e(t),0,1)},d.prototype.render=function(t){if(t.frameState&&(this.sliderInitialized_||this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},d}(h);const F=y("div",{id:"map",class:"map"},null,-1),P=y("div",null,"知识点：",-1),C=y("div",null,"view配置项 extent 视图可移动范围",-1),T={setup(t){const e=new d({layers:[new c({source:new u({})})],keyboardEventTarget:document,controls:g().extend([new R]),view:new p({center:[328627.563458,5921296.662223],zoom:8,extent:[-572513.341856,5211017.966314,916327.095083,6636950.728974]})});return _((()=>{e.setTarget("map")})),(t,e)=>(f(),m(v,null,[F,P,C],64))}};export{T as default};
