import{T as t,N as e,A as n,p as r,q as i,O as o,P as s}from"./TileProperty.6da85ab0.js";var a,l=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});var u=function(n){function i(t,e,r,i,o,s){var a=n.call(this,t,e,s)||this;return a.crossOrigin_=i,a.src_=r,a.key=r,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=o,a}return l(i,n),i.prototype.getImage=function(){return this.image_},i.prototype.setImage=function(e){this.image_=e,this.state=t.LOADED,this.unlistenImage_(),this.changed()},i.prototype.handleImageError_=function(){var e;this.state=t.ERROR,this.unlistenImage_(),this.image_=((e=r(1,1)).fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas),this.changed()},i.prototype.handleImageLoad_=function(){var e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=t.LOADED:this.state=t.EMPTY,this.unlistenImage_(),this.changed()},i.prototype.load=function(){this.state==t.ERROR&&(this.state=t.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==t.IDLE&&(this.state=t.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=e(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(n),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(e){var n=this,r=e||{},o=i({},r);return delete o.preload,delete o.useInterimTilesOnError,(n=t.call(this,o)||this).on,n.once,n.un,n.setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return c(e,t),e.prototype.getPreload=function(){return this.get(o.PRELOAD)},e.prototype.setPreload=function(t){this.set(o.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.USE_INTERIM_TILES_ON_ERROR,t)},e}(s);export{h as B,u as I};
